---
title: CommonNovel 仕様
author: Alice Project, Lemon73
version: '0.1.0'
date: '2025-06-26'
license: '[CC-BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/)'
---

# 1. 導入

## 1.1. Anov 構文とは?

Anov (Advanced-Novel) はノベルゲームの開発のための単純なテキストフォーマットです。Alice Project の創始者である [Lemon73](https://github.com/Lemon73-Computing) によって開発され、2023年に [Alice Novel v0.9.0-alpha](https://github.com/AliceNovel/AliceNovel/tree/v0.9.0-alpha) でノベルゲームを動かせる形として配布されました。

### 1.1.1. デザインの目標

CommonNovel の掲げる言語デザインの目標は、以下に示す通りです:

- 簡単に読み書き、編集ができる
- 効率
- 統一的
- Novel IL への変換

CommonNovel は以下のことを目標としません:

- 直接プログラムによる読み取り (Novel IL を通さない利用)
- 拡張性
- 柔軟性

## 1.2. 概要

### 1.2.1. 節

CommonNovel では、'節'と呼ばれる区分を利用します。ノベルゲームにおける一度の読み取りはこの'節'という単位によって行われます。

節は、基本的に改行から次の改行までの間を示します。

節は0行以上、(理論上は) 上限なしの区間を示しています。

以下に例を示します:

#### 例1

(main.anov)
```sh
- アリス
[こんにちは!!]

- うさぎ
[はい、こんにちは。]

```

この例では、初めの節は `- アリス` と `[こんにちは!!]` の2行となります。続く節は、`-うさぎ` と `[はい、こんにちは。]` の2行が対象です。

#### 例2

(main.anov)
```sh
- アリス
[こんにちは!!]


- うさぎ
[はい、こんにちは。]

```

この例は、例1と類似していますが、`[こんにちは!!]` と `- うさぎ` の間が2行空いています。そのため、初めの節は先程と同様に `- アリス` と `[こんにちは!!]` の2行ですが、その次の節は、` ` (空白) となります。[^line-of-nothing]そして、最後の節が `-うさぎ` と `[はい、こんにちは。]` の2行となります。

[^line-of-nothing]: 公式仕様上はこの通りですが、いくつかのツールは空白の節を削除する機能を追加する予定です。

#### 例3

(main.anov)
```sh
- アリス
[おはようございます。]
[こんにちは。]

```

この例は、1つの節で同じコマンドを2回使う例です。この場合は、後者である `[こんにちは。]` を優先して読み込みます。これは、仕様上問題はありませんが、非推奨です。

### 1.2.2. 拡張子

*この項目は現在議論中です。*

画像ファイルなど、外部ファイルの読み込みの際には拡張子を選択する必要があります。

### 1.2.3. プラグイン

*この項目は現在議論中です。*

基本コマンド以外の処理ができるように、プラグインシステムの導入を検討する必要があります。

## 1.3. 基本コマンド

CommonNovel では、基本的なコマンドを定義しています。

### 1.3.1. 会話

(変換前: main.anov)
```sh
[テキスト]
```

(変換後: main.nil)
```json
{
  "cells": [
    {
      "messages": "テキスト" // または "text"
    }
  ]
}
```

### 1.3.2. キャラクター

(変換前: main.anov)
```sh
- キャタクター名
```

(変換後: main.nil)
```json
{
  "cells": [
    {
      "characrter-name": "キャラクター名", // または "name"
      "images": {
        "foreground": "キャラクター名.png" // または "character"
      }
    }
  ]
}
```

後述する[感情](#133-感情)と同時に利用できます。

(変換前: main.anov)
```sh
- キャラクター / 感情
```

(変換後: main.nil)
```json
{
  "cells": [
    {
      "characrter-name": "キャラクター名", // または "name"
      "images": {
        "foreground": "キャラクター名-感情.png" // または "character"
      }
    }
  ]
}
```

### 1.3.3. 感情

基本的に、[キャラクター](#132-キャラクター)と同時に利用します。

(変換前: main.anov)
```sh
/ 感情
```

(変換後: main.nil)
```json
{
  "cells": [
    {
      "images": {
        "foreground": "(キャラクター名)-感情.png" // または "character"
      }
    }
  ]
}
```

先述した[キャラクター](#132-キャラクター)と同時に利用できます。詳細はそちらを参照してください。

### 1.3.4. 場所/画像表示

(変換前: main.anov)
```sh
> 場所
```

(変換後: main.nil)
```json
{
  "cells": [
    {
      "images": {
        "background": "場所.png"
      }
    }
  ]
}
```

### 1.3.5. 音声再生

(変換前: main.anov)
```sh
audio: 音声
```

(変換後: main.nil)
```json
{
  "cells": [
    {
      "musics": { // または "audio"
        "background": "音声.mp3"
      }
    }
  ]
}
```

Hint: "background" では、音声を再生しながら節を進めることができ、"foreground" では、音声が終わるまで節を進めることができません。これは動画再生も同様です。

**音声の停止**

(変換前: main.anov)
```sh
audio: 
```

(変換後: main.nil)
```json
{
  "cells": [
    {
      "musics": { // または "audio"
        "background": ""
      }
    }
  ]
}
```

### 1.3.6. 動画再生

(変換前: main.anov)
```sh
movie: 動画
```

(変換後: main.nil)
```json
{
  "cells": [
    {
      "movies": {
        "foreground": "動画.mp4"
      }
    }
  ]
}
```

# ライセンス

Copyright © 2023-2025, Alice Project.

# 参考

<!--
## 規範的参照
-->

## 技術的参照

- [commonmark-spec](https://github.com/commonmark/commonmark-spec/blob/0.31.2/spec.txt)
